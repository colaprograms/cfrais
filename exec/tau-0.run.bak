#!/home/pi/chat/env/bin/python3
import datetime, subprocess
import inflect

def say(zz):
    subprocess.run(["/home/pi/chat/tts", zz])

now = datetime.datetime.now()
foo = inflect.engine()
month = now.strftime("%B")
day = foo.ordinal(now.day)
if now.minute == 0:
    minute = "o'clock"
else:
    minute = foo.number_to_words(now.minute)
    if now.minute < 10:
        minute = "oh " + minute
pmoram = "pee em" if now.hour >= 12 else "ey em"
if now.hour > 12:
    offset = -12
elif now.hour == 0:
    offset = 12
else:
    offset = 0
hour = foo.number_to_words(now.hour + offset)
if 2020 <= now.year <= 2029:
    year = "twenty twenty %d" % (now.year - 2020)
else:
    year = now.year
say(f"By my electro-cybernetic steam pocketwatch, it is {month} {day}, {hour} {minute} {pmoram}. The year, horrifyingly, is {year}.")
